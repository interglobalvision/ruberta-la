{"version":3,"sources":["main.js"],"names":["Site","mobileThreshold","init","_this","this","$ratioImages","$","$masonryHolder","window","resize","onResize","document","ready","length","imagesLoaded","progress","sizeImages","clearTimeout","resizeTimer","setTimeout","layoutMasonry","masonry","itemSelector","transitionDuration","each","width","parent","css","fixWidows","string","html","replace"],"mappings":"AAGAA,MACEC,gBAAiB,IACjBC,KAAM,WACJ,GAAIC,OAAQC,IAEZD,OAAME,aAAeC,EAAE,gBACvBH,MAAMI,eAAiBD,EAAE,mBAEzBA,EAAEE,QAAQC,OAAO,WACfN,MAAMO,aAGRJ,EAAEK,UAAUC,MAAM,WAEZT,MAAME,aAAaQ,QACrBP,EAAE,iBAAiBQ,eAAeC,SAAU,WAC1CZ,MAAMa,kBAOdN,SAAU,WACR,GAAIP,OAAQC,IAERD,OAAME,aAAaQ,SAErBI,aAAad,MAAMe,aACnBf,MAAMe,YAAcC,WAAW,WAC7BhB,MAAMa,cACL,OAKPI,cAAe,WACDhB,KAENG,eAAec,SACnBC,aAAc,gBACdC,mBAAoB,KAIxBP,WAAY,WACV,GAAIb,OAAQC,IAGZD,OAAME,aAAamB,KAAK,WACtB,GAAIC,OAAQnB,EAAEF,MAAMsB,SAASD,OAE7BnB,GAAEF,MAAMuB,IAAI,aAAcF,SAIxBtB,MAAMI,eAAeM,QACvBV,MAAMiB,iBAIVQ,UAAW,WAETtB,EAAE,kBAAkBkB,KAAK,WACvB,GAAIK,QAASvB,EAAEF,MAAM0B,MACrBD,QAASA,OAAOE,QAAQ,YAAY,YACpCzB,EAAEF,MAAM0B,KAAKD,YAKnB7B,KAAKE","file":"main.min.js","sourcesContent":["/* jshint browser: true, devel: true, indent: 2, curly: true, eqeqeq: true, futurehostile: true, latedef: true, undef: true, unused: true */\n/* global $, jQuery, document, Site, Modernizr */\n\nSite = {\n  mobileThreshold: 601,\n  init: function() {\n    var _this = this;\n\n    _this.$ratioImages = $('.ratio-image');\n    _this.$masonryHolder = $('.masonry-holder');\n\n    $(window).resize(function(){\n      _this.onResize();\n    });\n\n    $(document).ready(function () {\n      // Size ratio images and layout masonry as loaded\n      if (_this.$ratioImages.length) {\n        $('#main-content').imagesLoaded().progress( function() {\n          _this.sizeImages();\n        });\n      }\n    });\n\n  },\n\n  onResize: function() {\n    var _this = this;\n\n    if (_this.$ratioImages.length) {\n      // Debounced masonry & image re-layout\n      clearTimeout(_this.resizeTimer);\n      _this.resizeTimer = setTimeout(function() {\n        _this.sizeImages();\n      }, 250);\n    }\n\n  },\n\n  layoutMasonry: function() {\n    var _this = this;\n\n    _this.$masonryHolder.masonry({\n      itemSelector: '.masonry-item',\n      transitionDuration: 0,\n    });\n  },\n\n  sizeImages: function() {\n    var _this = this;\n\n    // Set image max-height to width of container\n    _this.$ratioImages.each(function() {\n      var width = $(this).parent().width();\n\n      $(this).css('max-height', width);\n    });\n\n    // Layout masonry after $.each (synchronous)\n    if (_this.$masonryHolder.length) {\n      _this.layoutMasonry();\n    }\n  },\n\n  fixWidows: function() {\n    // utility class mainly for use on headines to avoid widows [single words on a new line]\n    $('.js-fix-widows').each(function(){\n      var string = $(this).html();\n      string = string.replace(/ ([^ ]*)$/,'&nbsp;$1');\n      $(this).html(string);\n    });\n  },\n};\n\nSite.init();\n"]}